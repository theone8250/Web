<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <script>
        function horoscopeName(birthdate) {
            var now = new Date(birthdate);
            var year = now.getFullYear();
            var month = now.getMonth() + 1;
            var day = now.getDate();

            if ((month == 3 && day >= 21) || (month == 4 && day <= 19)) {
                return horoscopeData["aries"];
            }
            else if ((month == 4 && day >= 20) || (month == 5 && day <= 20)) {
                return horoscopeData["taurus"];
            }
            else if ((month == 5 && day >= 21) || (month == 6 && day <= 21)) {
                return horoscopeData["gemini"];
            }
            else if ((month == 6 && day >= 22) || (month == 7 && day <= 22)) {
                return horoscopeData["cancer"];
            }
            else if ((month == 7 && day >= 23) || (month == 8 && day <= 22)) {
                return horoscopeData["leo"];
            }
            else if ((month == 8 && day >= 23) || (month == 9 && day <= 22)) {
                return horoscopeData["virgo"];
            }
            else if ((month == 9 && day >= 23) || (month == 10 && day <= 23)) {
                return horoscopeData["libra"];
            }
            else if ((month == 10 && day >= 24) || (month == 11 && day <= 22)) {
                return horoscopeData["scorpio"];
            }
            else if ((month == 11 && day >= 23) || (month == 12 && day <= 21)) {
                return horoscopeData["sagittarius"];
            }
            else if ((month == 12 && day >= 22) || (month == 1 && day <= 19)) {
                return horoscopeData["capricorn"];
            }
            else if ((month == 1 && day >= 20) || (month == 2 && day <= 18)) {
                return horoscopeData["aquarius"];
            }
            else if ((month == 2 && day >= 19) || (month == 3 && day <= 20)) {
                return horoscopeData["pisces"];
            }
        }

        function lifeNumber(birthdate) {
            var num1 = birthdate.replace("-", "");
            var num2 = num1.replace("-", "");
            var num = parseInt(num2);
            var lifeNum = 0;

            while (num >= 10) {
                for (var i = 0; i < num2.length; i++) {
                    lifeNum += parseInt(num2.charAt(i));
                }
                num2 = lifeNum.toString();
                num = lifeNum;
                lifeNum = 0;
            }
            return num;
        }
        //點擊Enter事件
        document.getElementById("birthdate").onkeyup = function (event) {
            if (event.keyCode == 13) {
                doAnalysis();
            }
        }
        function doAnalysis() {
            // put your code here to complete analysis
            var birthdate = document.getElementById("birthdate").value;
            var now = new Date(birthdate);
            var horoscope = horoscopeName(birthdate);
            var lifeNum = lifeNumber(birthdate);
            count++;

            var list = document.getElementById("analysisResults");
            var li = document.createElement("li");
            li.classList.add("list-group-item");
            li.setAttribute("id", count);//設定屬性id="count"
            li.innerHTML = "<span class='label label-info'>" + birthdate + "<button type='button' class='close' data-dismiss='modal' aria-label='Close' id='delButton'>" + "<span aria-hidden='true'>&times;</span>" + "</button>" + "</span> 出生的你。星座是 <em>" + horoscope.name + "</em><div>你的生命靈數 :<br>" + lifeNum + ". " + horoscope.lookup[lifeNum - 1] + "</div>";


            if (list.childNodes.length > 0) {
                list.insertBefore(li, list.childNodes[0]);
            }
            else {
                list.appendChild(li);
            }
            document.getElementById("delButton").onclick = function del() {
                list.removeChild(li);
            }
        }

    </script>
</body>

</html>